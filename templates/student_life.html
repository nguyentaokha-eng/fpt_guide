{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
    :root {
        --orange-primary: #ff6b35;
        --orange-secondary: #ff8c42;
        --dark-text: #2c3e50;
        --light-bg: #f8f9fa;
    }

    .student-life-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 20px;
    }

    /* ============ SECTION TITLES ============ */
    .section-title {
        font-family: 'Montserrat', sans-serif;
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 50px;
        position: relative;
        display: inline-block;
    }

    .section-title::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 0;
        width: 200px;
        height: 4px;
        background: linear-gradient(90deg, var(--orange-primary), var(--orange-secondary));
        border-radius: 2px;
    }

    .section-title .highlight {
        color: var(--orange-primary);
    }

    .diagonal-lines {
        display: inline-block;
        width: 100px;
        height: 3px;
        background: repeating-linear-gradient(
            45deg,
            #ddd,
            #ddd 5px,
            transparent 5px,
            transparent 10px
        );
        margin-left: 20px;
        vertical-align: middle;
    }

    /* ============ FACILITIES CAROUSEL SECTION ============ */
    .facilities-section {
        margin-bottom: 80px;
    }

    .carousel-container {
        position: relative;
        overflow: hidden;
        padding: 0 60px;
    }

    .carousel-track {
        display: flex;
        gap: 20px;
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .facility-card {
        min-width: calc(25% - 15px);
        height: 280px;
        flex-shrink: 0;
        position: relative;
        border-radius: 15px;
        overflow: hidden;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    }

    .facility-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(255, 107, 53, 0.2);
    }

    .placeholder-container {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #fff 0%, #f5f5f5 100%);
        border: 2px solid #e0e0e0;
        transition: all 0.3s ease;
    }

    .facility-card:hover .placeholder-container {
        background: linear-gradient(135deg, #fff5f0 0%, #ffe6d9 100%);
        border-color: var(--orange-primary);
    }

    .placeholder-icon {
        font-size: 4rem;
        margin-bottom: 15px;
        opacity: 0.7;
        transition: all 0.3s ease;
    }

    .facility-card:hover .placeholder-icon {
        transform: scale(1.1);
        opacity: 1;
    }

    .facility-name {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--dark-text);
        text-align: center;
        padding: 0 15px;
        transition: all 0.3s ease;
    }

    .facility-card:hover .facility-name {
        color: var(--orange-primary);
    }

    .carousel-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 50px;
        height: 50px;
        background: white;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
        z-index: 10;
    }

    .carousel-btn:hover {
        background: var(--orange-primary);
        color: white;
        transform: translateY(-50%) scale(1.1);
    }

    .carousel-btn.prev {
        left: 0;
    }

    .carousel-btn.next {
        right: 0;
    }

    /* ============ MODAL FOR IMAGE ZOOM ============ */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 9999;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.3s ease;
    }

    .modal.active {
        display: flex;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .modal-content {
        position: relative;
        max-width: 90%;
        max-height: 90%;
        animation: zoomIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes zoomIn {
        from {
            transform: scale(0.7);
            opacity: 0;
        }
        to {
            transform: scale(1);
            opacity: 1;
        }
    }

    .modal-image {
        max-width: 100%;
        max-height: 90vh;
        border-radius: 15px;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
        object-fit: contain;
    }

    .modal-close {
        position: absolute;
        top: -50px;
        right: -50px;
        width: 40px;
        height: 40px;
        background: white;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .modal-close:hover {
        background: var(--orange-primary);
        color: white;
        transform: rotate(90deg);
    }

    .modal-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.9);
        border: none;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.5rem;
        transition: all 0.3s ease;
    }

    .modal-nav:hover {
        background: var(--orange-primary);
        color: white;
    }

    .modal-nav.prev {
        left: -70px;
    }

    .modal-nav.next {
        right: -70px;
    }

    .modal-caption {
        text-align: center;
        color: white;
        margin-top: 20px;
        font-size: 1.2rem;
        font-weight: 600;
    }

    /* ============ CLUBS & ACTIVITIES SECTION ============ */
    .clubs-section {
        margin-bottom: 80px;
    }

    .clubs-intro {
        max-width: 1200px;
        font-size: 1.1rem;
        line-height: 1.8;
        color: #555;
        margin-bottom: 40px;
    }

    .cta-button {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 15px 35px;
        background: linear-gradient(135deg, var(--orange-primary), var(--orange-secondary));
        color: white;
        text-decoration: none;
        border-radius: 50px;
        font-weight: 600;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);
        margin-bottom: 40px;
    }

    .cta-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 35px rgba(255, 107, 53, 0.4);
    }

    .cta-button svg {
        width: 20px;
        height: 20px;
    }

    .clubs-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 30px;
    }

    .club-card {
        position: relative;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: all 0.4s ease;
        border: 3px solid var(--orange-primary);
        background: #fff;
    }

    .club-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 50px rgba(255, 107, 53, 0.25);
    }

    .club-image {
        width: 100%;
        height: 350px;
        object-fit: cover;
        object-position: center;
        transition: transform 0.5s ease;
    }

    .club-card:hover .club-image {
        transform: scale(1.1);
    }

    /* ============ INTERNATIONAL EXPERIENCE SECTION ============ */
    .international-section {
        margin-bottom: 80px;
    }

    .international-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 60px;
        align-items: center;
    }

    .international-images {
        position: relative;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(2, 1fr);
        gap: 15px;
        height: 600px;
    }

    .international-images::before {
        content: '';
        position: absolute;
        top: -20px;
        left: -20px;
        width: 150px;
        height: 150px;
        border: 4px solid var(--orange-primary);
        border-radius: 20px;
        z-index: -1;
    }

    .int-image-wrapper {
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        transition: all 0.4s ease;
        cursor: pointer;
        border: 3px solid var(--orange-primary);
    }

    .int-image-wrapper:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(255, 107, 53, 0.3);
    }

    .int-image-wrapper:nth-child(1) {
        grid-row: 1 / 3;
    }

    .int-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .int-image-wrapper:hover .int-image {
        transform: scale(1.1);
    }

    .international-content {
        padding: 20px;
    }

    .international-content p {
        font-size: 1.1rem;
        line-height: 1.8;
        color: #555;
        margin-bottom: 30px;
    }

    .pagination-dots {
        display: flex;
        gap: 10px;
        margin-top: 20px;
    }

    .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #ddd;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .dot.active,
    .dot:hover {
        background: var(--orange-primary);
        transform: scale(1.2);
    }

    /* ============ RESPONSIVE ============ */
    @media (max-width: 1200px) {
        .facility-card {
            min-width: calc(33.333% - 14px);
            height: 250px;
        }

        .placeholder-icon {
            font-size: 3.5rem;
        }

        .facility-name {
            font-size: 1rem;
        }
    }

    @media (max-width: 768px) {
        .section-title {
            font-size: 2rem;
        }

        .carousel-container {
            padding: 0 50px;
        }

        .facility-card {
            min-width: calc(50% - 10px);
            height: 220px;
        }

        .placeholder-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .facility-name {
            font-size: 0.95rem;
        }

        .clubs-grid {
            grid-template-columns: 1fr;
        }

        .international-container {
            grid-template-columns: 1fr;
        }

        .international-images {
            height: 500px;
        }

        .modal-nav,
        .modal-close {
            position: relative;
            left: auto;
            right: auto;
            top: auto;
            margin: 10px;
        }

        .modal-content {
            max-width: 95%;
        }
    }

    @media (max-width: 480px) {
        .facility-card {
            min-width: calc(100% - 10px);
            height: 200px;
        }

        .placeholder-icon {
            font-size: 2.5rem;
        }

        .facility-name {
            font-size: 0.9rem;
        }
    }
</style>

<div class="student-life-container">
    <!-- ============ FACILITIES SECTION ============ -->
    <section class="facilities-section">
        <h2 class="section-title">
            C∆° s·ªü <span class="highlight">v·∫≠t ch·∫•t</span>
            <span class="diagonal-lines"></span>
        </h2>

        <div class="carousel-container">
            <button class="carousel-btn prev" onclick="moveCarousel(-1)">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M15 18l-6-6 6-6"/>
                </svg>
            </button>

            <div class="carousel-track" id="carouselTrack">
                <!-- Ph√≤ng h·ªçc -->
                <div class="facility-card" onclick="openModal(0, 'main')" data-facility="phong-hoc">
                    <div class="placeholder-container">
                        <div class="placeholder-icon">üè´</div>
                        <div class="facility-name">Ph√≤ng h·ªçc</div>
                    </div>
                </div>

                <!-- K√Ω t√∫c x√° -->
                <div class="facility-card" onclick="openModal(1, 'main')" data-facility="ktx">
                    <div class="placeholder-container">
                        <div class="placeholder-icon">üè†</div>
                        <div class="facility-name">K√Ω t√∫c x√°</div>
                    </div>
                </div>

                <!-- Th∆∞ vi·ªán -->
                <div class="facility-card" onclick="openModal(2, 'main')" data-facility="thu-vien">
                    <div class="placeholder-container">
                        <div class="placeholder-icon">üìö</div>
                        <div class="facility-name">Th∆∞ vi·ªán</div>
                    </div>
                </div>

                <!-- Khu th·ªÉ thao -->
                <div class="facility-card" onclick="openModal(3, 'main')" data-facility="the-thao">
                    <div class="placeholder-container">
                        <div class="placeholder-icon">‚öΩ</div>
                        <div class="facility-name">Khu th·ªÉ thao</div>
                    </div>
                </div>

                <!-- Kh√¥ng gian xanh -->
                <div class="facility-card" onclick="openModal(4, 'main')" data-facility="xanh">
                    <div class="placeholder-container">
                        <div class="placeholder-icon">üå≥</div>
                        <div class="facility-name">Kh√¥ng gian xanh</div>
                    </div>
                </div>

                <!-- H·ªôi tr∆∞·ªùng -->
                <div class="facility-card" onclick="openModal(5, 'main')" data-facility="hoi-truong">
                    <div class="placeholder-container">
                        <div class="placeholder-icon">üé≠</div>
                        <div class="facility-name">H·ªôi tr∆∞·ªùng</div>
                    </div>
                </div>

                <!-- Ph√≤ng Lab -->
                <div class="facility-card" onclick="openModal(6, 'main')" data-facility="lab">
                    <div class="placeholder-container">
                        <div class="placeholder-icon">üî¨</div>
                        <div class="facility-name">Ph√≤ng Lab</div>
                    </div>
                </div>

                <!-- Studio -->
                <div class="facility-card" onclick="openModal(7, 'main')" data-facility="studio">
                    <div class="placeholder-container">
                        <div class="placeholder-icon">üé¨</div>
                        <div class="facility-name">Studio</div>
                    </div>
                </div>

                <!-- LUK Facilities -->
                <div class="facility-card" onclick="openLukModal()" data-facility="luk">
                    <div class="placeholder-container">
                        <div class="placeholder-icon">‚òï</div>
                        <div class="facility-name">LUK Facilities</div>
                    </div>
                </div>
            </div>

            <button class="carousel-btn next" onclick="moveCarousel(1)">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6"/>
                </svg>
            </button>
        </div>

        <div class="pagination-dots" style="justify-content: center; margin-top: 30px;">
            <span class="dot active"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
    </section>

    <!-- ============ CLUBS & ACTIVITIES SECTION ============ -->
    <section class="clubs-section">
        <h2 class="section-title">
            Ho·∫°t ƒë·ªông <span class="highlight">ngo·∫°i kh√≥a & CLB</span>
            <span class="diagonal-lines"></span>
        </h2>

        <p class="clubs-intro">
            T·∫°i FPTU, sinh vi√™n ƒë∆∞·ª£c tham gia h·ªá sinh th√°i ngo·∫°i kh√≥a s√¥i ƒë·ªông v·ªõi h∆°n 50 c√¢u l·∫°c b·ªô tr·∫£i d√†i t·ª´ h·ªçc thu·∫≠t, ngh·ªá thu·∫≠t, th·ªÉ thao ƒë·∫øn c√¥ng ngh·ªá. C√°c ho·∫°t ƒë·ªông ƒë∆∞·ª£c t·ªï ch·ª©c quanh nƒÉm, t·∫°o m√¥i tr∆∞·ªùng r√®n luy·ªán k·ªπ nƒÉng, m·ªü r·ªông m·∫°ng l∆∞·ªõi v√† kh√°m ph√° ƒëam m√™. ƒê√¢y l√† n∆°i m·ªói sinh vi√™n c√≥ th·ªÉ "ch√°y h·∫øt m√¨nh", ph√°t tri·ªÉn b·∫£n th√¢n to√†n di·ªán v√† x√¢y d·ª±ng b·∫£n s·∫Øc ri√™ng.
        </p>

        <a href="{% url 'families' %}" class="cta-button">
            Xem th√™m
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </a>

        <div class="clubs-grid">
            <div class="club-card">
                <img src="{% static 'image/club/club-1.jpg' %}" alt="Ho·∫°t ƒë·ªông CLB 1" class="club-image">
            </div>
            <div class="club-card">
                <img src="{% static 'image/club/club-2.jpg' %}" alt="Ho·∫°t ƒë·ªông CLB 2" class="club-image">
            </div>
            <div class="club-card">
                <img src="{% static 'image/club/club-3.jpg' %}" alt="Ho·∫°t ƒë·ªông CLB 3" class="club-image">
            </div>
            <div class="club-card">
                <img src="{% static 'image/club/club-4.jpg' %}" alt="Ho·∫°t ƒë·ªông CLB 4" class="club-image">
            </div>
        </div>
    </section>

    <!-- ============ INTERNATIONAL EXPERIENCE SECTION ============ -->
    <section class="international-section">
        <h2 class="section-title">
            Tr·∫£i nghi·ªám <span class="highlight">qu·ªëc t·∫ø</span>
            <span class="diagonal-lines"></span>
        </h2>

        <div class="international-container">
            <div class="international-images">
                <div class="int-image-wrapper">
                    <img src="{% static 'image/international/i-1.jpg' %}" alt="Tr·∫£i nghi·ªám qu·ªëc t·∫ø 1" class="int-image">
                </div>
                <div class="int-image-wrapper">
                    <img src="{% static 'image/international/i-2.jpg' %}" alt="Tr·∫£i nghi·ªám qu·ªëc t·∫ø 2" class="int-image">
                </div>
                <div class="int-image-wrapper">
                    <img src="{% static 'image/international/i-3.jpg' %}" alt="Tr·∫£i nghi·ªám qu·ªëc t·∫ø 3" class="int-image">
                </div>
            </div>

            <div class="international-content">
                <p>
                    100% sinh vi√™n FPTU c√≥ c∆° h·ªôi h·ªçc t·∫≠p v√† tr·∫£i nghi·ªám qu·ªëc t·∫ø. M·ªói sinh vi√™n FPTU ƒë∆∞·ª£c quy·ªÅn ƒëƒÉng k√Ω √≠t nh·∫•t m·ªôt h·ªçc k·ª≥ h·ªçc t·∫≠p ho·∫∑c trao ƒë·ªïi qu·ªëc t·∫ø t·∫°i tr∆∞·ªùng ƒë·∫°i h·ªçc ƒë·ªëi t√°c n∆∞·ªõc ngo√†i. T·ª´ c√°c ch∆∞∆°ng tr√¨nh h·ªçc t·∫≠p, r√®n luy·ªán ti·∫øng Anh ƒë·∫øn k·ªπ th·ª±c t·∫≠p to√†n c·∫ßu, sinh vi√™n ƒë∆∞·ª£c tr·ª±c ti·∫øp tr·∫£i nghi·ªám m√¥i tr∆∞·ªùng qu·ªëc t·∫ø, m·ªü r·ªông t∆∞ duy to√†n c·∫ßu v√† n√¢ng cao nƒÉng l·ª±c h·ªôi nh·∫≠p ngay t·ª´ khi c√≤n ng·ªìi tr√™n gh·∫ø nh√† tr∆∞·ªùng.
                </p>

                <a href="https://www.facebook.com/daihocfptdanang" target="_blank" class="cta-button">
                    Xem th√™m
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </a>

                <div class="pagination-dots">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- ============ MAIN MODAL ============ -->
<div class="modal" id="mainModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('main')">√ó</button>
        <button class="modal-nav prev" onclick="navigateModal(-1, 'main')">‚Äπ</button>
        <img src="" alt="" class="modal-image" id="mainModalImage">
        <button class="modal-nav next" onclick="navigateModal(1, 'main')">‚Ä∫</button>
        <div class="modal-caption" id="mainModalCaption"></div>
    </div>
</div>

<!-- ============ LUK MODAL ============ -->
<div class="modal" id="lukModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('luk')">√ó</button>
        <button class="modal-nav prev" onclick="navigateModal(-1, 'luk')">‚Äπ</button>
        <img src="" alt="" class="modal-image" id="lukModalImage">
        <button class="modal-nav next" onclick="navigateModal(1, 'luk')">‚Ä∫</button>
        <div class="modal-caption" id="lukModalCaption"></div>
    </div>
</div>

<script>
    // Main facilities data
    const facilities = [
        { name: 'Ph√≤ng h·ªçc', image: '{% static "image/facilities/phong-hoc.jpg.jpg" %}' },
        { name: 'K√Ω t√∫c x√°', image: '{% static "image/facilities/ki-tuc-xa.jpg" %}' },
        { name: 'Th∆∞ vi·ªán', image: '{% static "image/facilities/thu-vien.jpg" %}' },
        { name: 'Khu th·ªÉ thao', image: '{% static "image/facilities/khu-the-thao.jpg" %}' },
        { name: 'Kh√¥ng gian xanh', image: '{% static "image/facilities/khong-gian-xanh.jpg" %}' },
        { name: 'H·ªôi tr∆∞·ªùng', image: '{% static "image/facilities/hoi-truong.jpg" %}' },
        { name: 'Ph√≤ng Lab', image: '{% static "image/facilities/Phong-lab.jpg" %}' },
        { name: 'Studio', image: '{% static "image/facilities/studio.jpg.jpg" %}' }
    ];

    // LUK facilities data - 4 ·∫£nh
    const lukFacilities = [
        { name: 'LUK Cafe', image: '{% static "image/luk/luk-cafe.jpg" %}' },
        { name: 'LUK Solution', image: '{% static "image/luk/luk-sollution.jpg" %}' },
        { name: 'LUK Room', image: '{% static "image/luk/luk-room.jpg" %}' },
        { name: 'LUK Space', image: '{% static "image/luk/luk.ipg.jpg" %}' }
    ];

    // Carousel functionality
    let currentIndex = 0;
    const track = document.getElementById('carouselTrack');

    function moveCarousel(direction) {
        const cards = document.querySelectorAll('.facility-card');
        const cardWidth = cards[0].offsetWidth + 20; // width + gap
        const containerWidth = track.parentElement.offsetWidth - 120; // subtract padding
        const visibleCards = Math.floor(containerWidth / cardWidth);
        const maxIndex = Math.max(0, cards.length - visibleCards);

        currentIndex += direction;
        
        if (currentIndex < 0) currentIndex = 0;
        if (currentIndex > maxIndex) currentIndex = maxIndex;

        track.style.transform = `translateX(-${currentIndex * cardWidth}px)`;

        // Update pagination dots
        updatePaginationDots();
    }

    function updatePaginationDots() {
        const dots = document.querySelectorAll('.facilities-section .pagination-dots .dot');
        const cards = document.querySelectorAll('.facility-card');
        const cardWidth = cards[0].offsetWidth + 20;
        const containerWidth = track.parentElement.offsetWidth - 120;
        const visibleCards = Math.floor(containerWidth / cardWidth);
        const totalPages = Math.ceil(cards.length / visibleCards);
        const currentPage = Math.floor(currentIndex / visibleCards);

        dots.forEach((dot, index) => {
            if (index < totalPages) {
                dot.style.display = 'block';
                dot.classList.toggle('active', index === currentPage);
            } else {
                dot.style.display = 'none';
            }
        });
    }

    // Modal functionality
    let currentModalIndex = 0;
    let currentModalType = 'main';

    function openModal(index, type) {
        currentModalIndex = index;
        currentModalType = type;
        const modal = document.getElementById(type === 'main' ? 'mainModal' : 'lukModal');
        const modalImage = document.getElementById(type === 'main' ? 'mainModalImage' : 'lukModalImage');
        const modalCaption = document.getElementById(type === 'main' ? 'mainModalCaption' : 'lukModalCaption');
        
        const data = type === 'main' ? facilities : lukFacilities;
        
        modalImage.src = data[index].image;
        modalCaption.textContent = data[index].name;
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function openLukModal() {
        openModal(0, 'luk');
    }

    function closeModal(type) {
        const modal = document.getElementById(type === 'main' ? 'mainModal' : 'lukModal');
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    function navigateModal(direction, type) {
        const data = type === 'main' ? facilities : lukFacilities;
        currentModalIndex += direction;
        
        if (currentModalIndex < 0) currentModalIndex = data.length - 1;
        if (currentModalIndex >= data.length) currentModalIndex = 0;
        
        const modalImage = document.getElementById(type === 'main' ? 'mainModalImage' : 'lukModalImage');
        const modalCaption = document.getElementById(type === 'main' ? 'mainModalCaption' : 'lukModalCaption');
        
        modalImage.src = data[currentModalIndex].image;
        modalCaption.textContent = data[currentModalIndex].name;
    }

    // Close modal with ESC key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeModal('main');
            closeModal('luk');
        }
    });

    // Close modal when clicking outside
    document.getElementById('mainModal').addEventListener('click', function(e) {
        if (e.target === this) closeModal('main');
    });

    document.getElementById('lukModal').addEventListener('click', function(e) {
        if (e.target === this) closeModal('luk');
    });

    // Initialize pagination dots on load
    window.addEventListener('load', updatePaginationDots);
    window.addEventListener('resize', updatePaginationDots);
</script>

{% endblock %}